<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security"></html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>권한편집</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
</head>
<body>


    <div>
        <form th:action="@{/account/principal-modify}" method="get">
            <input type="text" name="searchText" id="" placeholder="아이디를 입력하세요." required th:value="${searchText}">
            <input type="submit" value="검색" >
        </form>
    </div>


    <div>
        <table>
            <thead>
                <th>항목</th>
                <th>내용</th>
            </thead>

            <tbody style="border : 1px solid black;">
                <tr>
                    <td>아이디</td>
                    <td sec:authentication="name">admin</td>
                </tr>
                <tr>
                    <td>보유권한</td>
                    <td>
                        <span th:each=" role: ${auth}">
                               <span th:text="${role.rolename}"></span> /

                        </span>
                    </td>
                </tr>
                <tr>
                    <td>권한 종류</td>
                    <td>
                        <span th:each=" role: ${allAuth}">
                                <button type="button" class="btn btn-outline-info authBtn" th:text="${role.rolename}" th:value="${role.id}" name=""> Info</button>
                        </span>
                    </td>
                </tr>
            </tbody>
        </table>


        <button onclick="result();">권한 수정하기</button>
    
    </div>
    
</body>
</html>

<script>

    $(document).ready(function () {
        
        $('.authBtn').click(function(){
            
            if ($(this).hasClass("btn-outline-info")) {
                $(this).removeClass("btn-outline-info");
                $(this).addClass("btn-info");
            }  else if ($(this).hasClass("btn-info")) {
                $(this).removeClass("btn-info");
                $(this).addClass("btn-outline-info");
            } 

        });



        
    });


    function result() {  

        let arr = [];
        $(".btn-info").each(function(){
            arr.push(this.value);
        });

        console.log(arr);
    }

    
</script>